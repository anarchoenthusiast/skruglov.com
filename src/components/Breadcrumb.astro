---
interface Props {
  items: {
    label: string;
    url?: string;
  }[];
  showLastItem?: boolean;
}

const { items, showLastItem = false } = Astro.props;

// Получаем текущий путь для стилизации
const currentPath = Astro.url.pathname;

// Имя автора для использования в проверках
const authorName = "Sergey Keuglov";

// Логика для определения типа страницы
const isProjectPage = currentPath.startsWith('/projects/') && currentPath !== '/projects/';
const isBlogPage = currentPath.startsWith('/blog/') && currentPath !== '/blog/';

// Определяем, какие элементы показывать
const displayedItems = (isProjectPage || isBlogPage || showLastItem) ? items : items.slice(0, -1);

// Функция для сокращения заголовка блога до первых двух слов
function shortenBlogTitle(title: string): string {
  const words = title.split(' ');
  if (words.length <= 2) return title;
  return words.slice(0, 2).join(' ') + '...';
}
---

<div class="flex items-center gap-2">
  {displayedItems.map((item, index) => (
    <>
      {index > 0 && <span class="text-black/50 dark:text-white/50">/</span>}
      {item.url ? (
        <a 
          href={item.url} 
          class:list={[
            "font-medium text-black dark:text-white hover:opacity-80 transition-opacity",
            { "hidden md:inline": item.label === authorName || item.label === "Sergei Kruglov" }
          ]}
        >
          {item.label === "Sergei Kruglov" ? authorName : item.label}
        </a>
      ) : (
        <span 
          class:list={[
            "text-black/44 dark:text-white/44",
            { "hidden md:inline": item.label === authorName || item.label === "Sergei Kruglov" }
          ]}
        >
          {(isBlogPage && index === 2) ? shortenBlogTitle(item.label) : (item.label === "Sergei Kruglov" ? authorName : item.label)}
        </span>
      )}
    </>
  ))}
</div> 